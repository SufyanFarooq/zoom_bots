<!DOCTYPE html>
<html>
<head>
  <title>Zoom Bot</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://unpkg.com/react@17.0.2/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/redux@4.0.5/dist/redux.min.js"></script>
  <script src="https://unpkg.com/redux-thunk@2.3.0/dist/redux-thunk.min.js"></script>
  <script src="https://unpkg.com/lodash@4.17.21/lodash.min.js"></script>
  <script src="https://unpkg.com/@zoom/meetingsdk/dist/zoom-meeting-4.0.0.min.js"></script>
  <style>body { margin:0; } #zmmtg-root { height: 100vh; }</style>
</head>
<body>
  <div id="zmmtg-root"></div>
  <script>
    // Read params from URL
    const urlParams = new URLSearchParams(window.location.search);
    const meetingNumber = urlParams.get('meetingNumber');
    const passWord = urlParams.get('passWord');
    const userName = urlParams.get('userName');
    const signature = urlParams.get('signature');
    const sdkKey = urlParams.get('sdkKey');
    const leaveUrl = urlParams.get('leaveUrl') || window.location.origin;

    console.log('Bot starting with params:', { meetingNumber, userName, sdkKey });

    const { ZoomMtg } = window;
    ZoomMtg.preLoadWasm();
    ZoomMtg.prepareWebSDK();
    
    // Auto-join function
    function autoJoin() {
      ZoomMtg.init({
        leaveUrl,
        success: function() {
          console.log('SDK init success for', userName);
          ZoomMtg.join({
            signature,
            sdkKey,
            meetingNumber,
            userName,
            passWord,
            success: function(res) {
              console.log('Bot', userName, 'joined successfully:', res);
            },
            error: function(err) {
              console.error('Bot', userName, 'join error:', err);
            }
          });
        },
        error: function(initErr) {
          console.error('Bot', userName, 'SDK init error:', initErr);
        }
      });
    }

    // Start auto-join after a short delay to ensure page is loaded
    setTimeout(autoJoin, 2000);
  </script>
</body>
</html> 